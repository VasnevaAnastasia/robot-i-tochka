# UC-01 Регистрация в программе лояльности

### Предусловия

1. Пользователь не авторизован в системе.

### Постусловия

1. В системе создана новая учетная запись.
2. Пользователь авторизован в системе.
3. Пользователь находится на экране входа в личный кабинет или на экране оформления заказа.

### Основной сценарий

1. Пользователь нажимает на кнопку «Регистрация» в программе лояльности.
2. Система отображает экран с формой регистрации.
3. Пользователь вводит номер телефона и нажимает кнопку «Получить код».
4. Система проверяет наличие пользователя с таким номером телефона в базе данных. Такой пользователь НЕ найден.
5. Система отправляет sms с кодом подтверждения на указанный номер телефона.
6. Система отображает поле для ввода кода с таймером обратного отсчета для повторного запроса кода.
7. Пользователь получает sms с кодом подтверждения.
8. Пользователь вводит в поле код, полученный в sms.
9. Система проверяет правильность кода. Код правильный.
10. Система создает новую учетную запись пользователя.
11. Система авторизует пользователя.
12. Система отображает форму для ввода данных пользователя: имя, фамилия, дата рождения, адрес электронной почты (все необязательны).
13. Система отображает форму для создания пароля для учетной записи. 
14. Пользователь вводит данные и нажимает на кнопку «Сохранить».
15. Система сохраняет полученные данные.
16. Система отображает личный кабинет пользователя.

### Альтернативные сценарии

4.а. Система проверяет наличие пользователя с таким номером телефона в базе данных. Такой пользователь найден.

1. Система отображает окно «Вы уже зарегистрированы в системе». 
2. Система отображает «Введите пароль от личного кабинета»
3. Выполняется **основной сценарий [UC-02 Авторизация в программе лояльности](uc02.md)**, начиная с шага 3.

7.а. Пользователь НЕ получает sms с кодом подтверждения.

1. По истечении таймера система отображает кнопку «Отправить код еще раз». 
2. Пользователь повторно запрашивает код подтверждения нажимая кнопку «Отправить код еще раз».
3. Выполняется **основной сценарий**, начиная с шага 5.

9.а. Система проверяет правильность кода. Код НЕправильный.

1. Система выводит сообщение об ошибке кода.
2. Выполняется **основной сценарий**, начиная с шага 8.

**Прерывание процесса:**

1. Система позволяет на каждом шаге вернуться к предыдущему шагу.
2. Система на любом шаге позволяет завершить процесс.

